{
  "name": "grunt-gui",
  "description": "Collection of tasks specific to Guardian Interactive",
  "version": "0.1.2",
  "homepage": "",
  "author": {
    "name": "Guardian Interactive team",
    "email": "interactive@guardian.co.uk"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/GuardianInteractive/grunt-gui.git"
  },
  "bugs": {
    "url": "https://github.com/GuardianInteractive/grunt-gui/issues"
  },
  "main": "Gruntfile.js",
  "engines": {
    "node": ">= 0.8.0"
  },
  "devDependencies": {
    "grunt": "~0.4.0"
  },
  "dependencies": {
    "grunt": "~0.4.0",
    "aws-sdk": "~0.9.5",
    "s3-batch": "~0.1.4",
    "mime": "~1.2.9",
    "prompt": "~0.2.9",
    "grunt-shell": "~0.2.1",
    "extend": "~1.1.3",
    "connect": "~2.0.0"
  },
  "keywords": [
    "gruntplugin"
  ],
  "readme": "# grunt-gui\n\nA collection of grunt tasks specifically related to Guardian Interactive projects. If any one of these gets large (and generally useful) enough to be broken out into its own repo then so be it, but for now the limited scope and co-dependencies of these tasks means it probably makes sense for them to live together here.\n\n## Tasks\n\n### fetch\nFetch a file from a remote URL, optionally process it, and save it locally\n\n```js\ngrunt.initConfig({\n  fetch: {\n    options: {\n      process: require( 'csv-to-json' ) // this is just an example!\n    },\n    table1: {\n      url: 'https://docs.google.com/spreadsheet/pub?key=123456789&output=csv',\n      dest: 'project/data/table1.json'\n    },\n    table2: {\n      url: 'https://docs.google.com/spreadsheet/pub?key=987654321&output=csv',\n      dest: 'project/data/table2.json'\n    }\n  }\n});\n```\n\n### createS3Instance\nCreates an s3 instance using the [AWS Node SDK](http://aws.amazon.com/sdkfornodejs/), which is then used by subsequent tasks in the deployment sequence.\n\nBecause there isn't currently a good way to share stuff between tasks in grunt, it uses a bad way instead: monkey patching. After this task has run, a reference to the instance is available for other tasks in the same sequence as `grunt.s3`.\n\nFor best results add your credentials as environment variables. On OS X, add the following lines to your `~/.bash_profile` file:\n\n```shell\nexport AWS_ACCESS_KEY_ID='yourKeyIdHere'\nexport AWS_SECRET_ACCESS_KEY='yourSecretKeyHere'\n```\n\nAlternatively you can pass them as config options:\n\n```js\n// DO NOT DO THIS - you may accidentally commit your credentials to GitHub\ngrunt.initConfig({\n  s3: {\n    accessKeyId: 'yourKeyIdHere',\n    secretAccessKey: 'yourSecretKeyHere'\n  }\n});\n\n// DO THIS INSTEAD\ngrunt.initConfig({\n  s3: {\n    credentials: '~/.aws_credentials.json' // or wherever. Should contain same properties as above\n  }\n});\n```\n\n\n### downloadFromS3\nThis multi-task downloads `key` from `bucket` and writes it to `dest`. As in:\n\n```js\ngrunt.initConfig({\n  downloadFromS3: {\n    options: {\n      bucket: '<%= s3.bucket %>'\n    },\n    manifest: {\n      options: {\n        key: '<%= projectPath %>/manifest.json',\n        dest: 'tmp/manifest.json'\n      }\n    }\n  }\n});\n```\n\n### verifyManifest\nCheck that the project's `guid` (set in `Gruntfile.js`) is the same as that in the existing project `manifest.json` file on S3. This is to prevent naming collisions.\n\n### replaceTags\nGoes through files and replaces <%= tags %> with the appropriate variables:\n\n```js\ngrunt.initConfig({\n  replaceTags: {\n    preDeploy: {\n      files: [\n        {\n          expand: true,\n          cwd: 'project/boot/',\n          src: [ '**/*' ],\n          dest: 'tmp/deploy/boot'\n        }\n      ],\n      options: {\n        variables: {\n          projectUrl: 'http://interactive.guim.co.uk/my-project',\n          versionUrl: 'http://interactive.guim.co.uk/my-project/v/3'\n        }\n      }\n    }\n  }\n});\n```\n\n### lockProject\nUploads a file to `<%= projectPath %>/locked.txt`, to prevent concurrency fuckups. `lockProject:unlock` deletes the file once deployment has successfully completed.\n\n\n### uploadToS3\nMulti-task to upload files and data. If you pass in `key` it will upload a single file, if you pass in `root` it will upload the contents of a folder to `pathPrefix`. With `key` you have the option of `src`, which uploads the contents of a file (guessing the mime-type) or `data`, which does exactly what you'd expect.\n\n```js\ngrunt.initConfig({\n  uploadToS3: {\n    options: {\n      bucket: '<%= s3.bucket %>'\n    },\n    manifest: {\n      options: {\n        key: '<%= projectPath %>/manifest.json',\n        data: '{\"guid\":\"<%= guid %>\",\"version\":<%= version %>}',\n        params: {\n          CacheControl: 'no-cache',\n          ContentType: 'application/json'\n        }\n      }\n    },\n    version: {\n      options: {\n        root: 'test/fixtures/sample/version/',\n        pathPrefix: '<%= versionPath %>',\n        params: {\n          CacheControl: 'max-age=31536000'\n        }\n      }\n    },\n    boot: {\n      options: {\n        root: 'tmp/boot/',\n        pathPrefix: '<%= projectPath %>',\n        params: {\n          CacheControl: 'max-age=20'\n        }\n      }\n    }\n  }\n});\n```\n",
  "readmeFilename": "README.md",
  "_id": "grunt-gui@0.1.2",
  "dist": {
    "shasum": "51afdb1a3e2b798a20fa1d70bd7f60b965fba138"
  },
  "_resolved": "git://github.com/GuardianInteractive/grunt-gui.git#d9091afd7b38060a900dbf5bdd108e3802bfb935",
  "_from": "grunt-gui@git://github.com/GuardianInteractive/grunt-gui.git"
}
